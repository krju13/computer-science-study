영상: [[따라學IT] 04. 실제로 컴퓨터끼리는 IP주소를 사용해 데이터를 주고받는다](https://youtu.be/s5kIGnaNFvM?list=PL0d8NnikouEWcF1jJueLdjRIC4HsUlULi)

### 3계층

- 3계층에서 하는 일

  - **다른 네트워크 대역까지**(other LAN) 어떻게 데이터를 전달할지 제어하는 일을 담당
  - 발신에서 착신까지, **패킷의 경로 제어**
  - 서로 다른 네트워크 대역끼리 통신을 하려면 **3계층 장비가 필요!**

- 3계층에서 쓰는 주소

  - WAN에서 통신할 때 사용하는 **IP 주소**
  - IPv4 주소: 현재 PC에 할당된 IP 주소
    - IP 주소는 항상 서브넷 마스크와 함께 사용됩니다. (Classfulless)
  - 서브넷 마스크: IP 주소에 대한 네크워크의 대역을 규정하는 것 ~~(지금까진 뭔말인지 모르겠다...)~~
    - 2진수로 표기했을 때 1로 시작, 1과 1사이에는 0이 올 수 없다는 규칙을 가지고 있다.
    - ex) 255.255.255.192 -> 11111111.11111111.11111111.11000000
  - 게이트웨이 주소: 외부와 통신할 때 사용하는 네트워크의 출입구
  - **IPv4, 서브넷 마스크, 게이트웨이 모두 있어야 인터넷과 연결 가능**

- 3계층의 프로토콜

  - ARP 프로토콜
  - IPv4 프로토콜
    - 4 byte
  - ICMP 프로토콜
### Classless IP 주소

- 서브넷 마스크를 도입

### 사설 IP와 공인 IP

- 공인 IP 1개당 2^32개의 사설 IP
- **다른 네트워크 대역과 통신을 할 때 사설 IP를 사용하지 않고 공인 IP로 바뀌어서 통신!**
  - 네이버 입장에서는 내 데스크탑의 IP와 내 휴대폰의 IP가 같다. (내 노트북, 아이패드도 같다.)
  - 즉 **하나의 공유기**에 모두 연결되어있기 때문에, **외부에서 내가 사용하는 IP 주소를 봤을 때**는 어떤 장비를 쓰던 같은 IP 주소라고 인식한다. (공인 IP로 바뀌어서 통신이 되었기 때문!)
  - ~~쉬운 예를 들어 이해를 돕자면 우리가 집에 인터넷을 설치할때 공인 IP 한개를 사는 것...!~~
  - 실제 인터넷 세상에서는 **공인 IP로만 통신**
  - 외부 네트워크 대역에서는 **사설 IP 대역이 보이지 않는다.**
    - 따라서 웹서버 등과 같이 **처음에 일방적으로 요청을 받아야하는 케이스**는 해당 서버에 **공인 IP를 할당**한다!
    - 포트포워딩을 사용하면 위의 경우도 해결가능...! (포트포워딩은 4계층)
- **NAT**: Network Address Translation
  - 특정 IP를 다른 특정 IP로 바꾸는 기술

### 특수한 IP 주소

- 0.0.0.0 ->Wildcard
- 127.0.0.1 -> 나 자신을 나타내는 주소
- 게이트웨이 주소: 어딘가로 가려면 일단 여기를 거쳐야한다...!